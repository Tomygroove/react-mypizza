{"ast":null,"code":"import { ADD_TO_CART, ADJUST_QTY, GET_DATA_ERROR, GET_DATA_REQUEST, GET_DATA_SUCCESS, REMOVE_FROM_CART } from '../actions/cart';\nconst initialState = {\n  loading: false,\n  pizzas: [],\n  cart: []\n};\nexport default ((state = initialState, action) => {\n  switch (action.type) {\n    case GET_DATA_REQUEST:\n      return { ...state,\n        loading: true\n      };\n\n    case GET_DATA_SUCCESS:\n      return {\n        loading: false,\n        pizzas: action.payload,\n        cart: [],\n        error: ''\n      };\n\n    case GET_DATA_ERROR:\n      return {\n        loading: false,\n        pizzas: [],\n        error: action.payload\n      };\n\n    case ADD_TO_CART:\n      const item = state.pizzas.find(pizza => pizza.id === action.payload.id);\n      const inCart = state.cart.find(item => item.id === action.payload.id ? true : false);\n      return { ...state,\n        cart: inCart ? state.cart.map(item => item.id === action.payload.id ? { ...item,\n          qty: item.qty + 1\n        } : item) : [...state.cart, { ...item,\n          qty: 1\n        }]\n      };\n\n    case REMOVE_FROM_CART:\n      return { ...state,\n        cart: state.cart.filter(item => item.id !== action.payload.id)\n      };\n\n    case ADJUST_QTY:\n      return { ...state,\n        cart: state.cart.map(item => item.id === action.payload.id ? { ...item,\n          qty: action.payload.qty\n        } : item)\n      };\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["/Users/nicolas/Documents/Ingesup/cours/M1/react/react-mypizza/react-mypizza/src/reducers/cart.js"],"names":["ADD_TO_CART","ADJUST_QTY","GET_DATA_ERROR","GET_DATA_REQUEST","GET_DATA_SUCCESS","REMOVE_FROM_CART","initialState","loading","pizzas","cart","state","action","type","payload","error","item","find","pizza","id","inCart","map","qty","filter"],"mappings":"AAAA,SAAQA,WAAR,EAAqBC,UAArB,EAAiCC,cAAjC,EAAiDC,gBAAjD,EAAmEC,gBAAnE,EAAqFC,gBAArF,QAA4G,iBAA5G;AAIA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,OAAO,EAAE,KADQ;AAEjBC,EAAAA,MAAM,EAAE,EAFS;AAGjBC,EAAAA,IAAI,EAAE;AAHW,CAArB;AAMA,gBAAe,CAACC,KAAK,GAAGJ,YAAT,EAAuBK,MAAvB,KAAkC;AAC7C,UAAOA,MAAM,CAACC,IAAd;AACI,SAAKT,gBAAL;AACI,aAAM,EACF,GAAGO,KADD;AAEFH,QAAAA,OAAO,EAAE;AAFP,OAAN;;AAIJ,SAAKH,gBAAL;AACI,aAAM;AACFG,QAAAA,OAAO,EAAE,KADP;AAEFC,QAAAA,MAAM,EAAEG,MAAM,CAACE,OAFb;AAGFJ,QAAAA,IAAI,EAAE,EAHJ;AAIFK,QAAAA,KAAK,EAAE;AAJL,OAAN;;AAMJ,SAAKZ,cAAL;AACI,aAAM;AACFK,QAAAA,OAAO,EAAE,KADP;AAEFC,QAAAA,MAAM,EAAE,EAFN;AAGFM,QAAAA,KAAK,EAAEH,MAAM,CAACE;AAHZ,OAAN;;AAKJ,SAAKb,WAAL;AACI,YAAMe,IAAI,GAAGL,KAAK,CAACF,MAAN,CAAaQ,IAAb,CAAkBC,KAAK,IAAIA,KAAK,CAACC,EAAN,KAAaP,MAAM,CAACE,OAAP,CAAeK,EAAvD,CAAb;AACA,YAAMC,MAAM,GAAGT,KAAK,CAACD,IAAN,CAAWO,IAAX,CAAgBD,IAAI,IAAIA,IAAI,CAACG,EAAL,KAAYP,MAAM,CAACE,OAAP,CAAeK,EAA3B,GAAgC,IAAhC,GAAuC,KAA/D,CAAf;AACA,aAAM,EACF,GAAGR,KADD;AAEFD,QAAAA,IAAI,EAAEU,MAAM,GAAGT,KAAK,CAACD,IAAN,CAAWW,GAAX,CAAeL,IAAI,IAAIA,IAAI,CAACG,EAAL,KAAYP,MAAM,CAACE,OAAP,CAAeK,EAA3B,GAAgC,EAAC,GAAGH,IAAJ;AAAUM,UAAAA,GAAG,EAAEN,IAAI,CAACM,GAAL,GAAW;AAA1B,SAAhC,GAA+DN,IAAtF,CAAH,GACZ,CAAC,GAAGL,KAAK,CAACD,IAAV,EAAgB,EAAC,GAAGM,IAAJ;AAAUM,UAAAA,GAAG,EAAE;AAAf,SAAhB;AAHE,OAAN;;AAKJ,SAAKhB,gBAAL;AACI,aAAM,EACF,GAAGK,KADD;AAEFD,QAAAA,IAAI,EAAEC,KAAK,CAACD,IAAN,CAAWa,MAAX,CAAmBP,IAAD,IAAUA,IAAI,CAACG,EAAL,KAAYP,MAAM,CAACE,OAAP,CAAeK,EAAvD;AAFJ,OAAN;;AAIJ,SAAKjB,UAAL;AACI,aAAM,EACF,GAAGS,KADD;AAEFD,QAAAA,IAAI,EAAEC,KAAK,CAACD,IAAN,CAAWW,GAAX,CAAeL,IAAI,IAAIA,IAAI,CAACG,EAAL,KAAYP,MAAM,CAACE,OAAP,CAAeK,EAA3B,GAAgC,EAAC,GAAGH,IAAJ;AAAUM,UAAAA,GAAG,EAAEV,MAAM,CAACE,OAAP,CAAeQ;AAA9B,SAAhC,GAAqEN,IAA5F;AAFJ,OAAN;;AAIJ;AACI,aAAOL,KAAP;AAtCR;AAyCH,CA1CD","sourcesContent":["import {ADD_TO_CART, ADJUST_QTY, GET_DATA_ERROR, GET_DATA_REQUEST, GET_DATA_SUCCESS, REMOVE_FROM_CART} from '../actions/cart'\n\n\n\nconst initialState = {\n    loading: false,\n    pizzas: [],\n    cart: []\n}\n\nexport default (state = initialState, action) => {\n    switch(action.type){\n        case GET_DATA_REQUEST:\n            return{\n                ...state,\n                loading: true\n            }\n        case GET_DATA_SUCCESS:\n            return{\n                loading: false,\n                pizzas: action.payload,\n                cart: [],\n                error: ''\n            }\n        case GET_DATA_ERROR:\n            return{\n                loading: false,\n                pizzas: [],\n                error: action.payload\n            }\n        case ADD_TO_CART:\n            const item = state.pizzas.find(pizza => pizza.id === action.payload.id)\n            const inCart = state.cart.find(item => item.id === action.payload.id ? true : false)\n            return{\n                ...state,\n                cart: inCart ? state.cart.map(item => item.id === action.payload.id ? {...item, qty: item.qty + 1} : item) :\n                [...state.cart, {...item, qty: 1}],\n            }\n        case REMOVE_FROM_CART:\n            return{\n                ...state,\n                cart: state.cart.filter((item) => item.id !== action.payload.id)         \n            }\n        case ADJUST_QTY:\n            return{\n                ...state,\n                cart: state.cart.map(item => item.id === action.payload.id ? {...item, qty: action.payload.qty} : item)\n            }\n        default:\n            return state\n\n    }\n}"]},"metadata":{},"sourceType":"module"}